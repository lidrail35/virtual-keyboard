!function(){"use strict";var t=[{key:"Backquote",ru:{little:"ё",big:"Ё"},en:{little:"`",big:"~"},size:0,status:2,pointer:null},{key:"Digit1",base:"1",shift:{ru:"!",en:"!"},size:0,status:2,pointer:null},{key:"Digit2",base:"2",shift:{ru:'"',en:"@"},size:0,status:2,pointer:null},{key:"Digit3",base:"3",shift:{ru:"№",en:"#"},size:0,status:2,pointer:null},{key:"Digit4",base:"4",shift:{ru:";",en:"$"},size:0,status:2,pointer:null},{key:"Digit5",base:"5",shift:{ru:"%",en:"%"},size:0,status:2,pointer:null},{key:"Digit6",base:"6",shift:{ru:":",en:"^"},size:0,status:2,pointer:null},{key:"Digit7",base:"7",shift:{ru:"?",en:"&"},size:0,status:2,pointer:null},{key:"Digit8",base:"8",shift:{ru:"*",en:"*"},size:0,status:2,pointer:null},{key:"Digit9",base:"9",shift:{ru:"(",en:"("},size:0,status:2,pointer:null},{key:"Digit0",base:"0",shift:{ru:")",en:")"},size:0,status:2,pointer:null},{key:"Minus",base:"-",shift:{ru:"_",en:"_"},size:0,status:2,pointer:null},{key:"Equal",base:"=",shift:{ru:"+",en:"+"},size:0,status:2,pointer:null},{key:"Backspace",text:"Backspace",size:11,status:1,pointer:null},{key:"Tab",text:"Tab",content:"\t",size:21,status:1,pointer:null},{key:"KeyQ",ru:{little:"й",big:"Й"},en:{little:"q",big:"Q"},size:0,status:2,pointer:null},{key:"KeyW",ru:{little:"ц",big:"Ц"},en:{little:"w",big:"W"},size:0,status:2,pointer:null},{key:"KeyE",ru:{little:"у",big:"У"},en:{little:"e",big:"E"},size:0,status:2,pointer:null},{key:"KeyR",ru:{little:"к",big:"К"},en:{little:"r",big:"R"},size:0,status:2,pointer:null},{key:"KeyT",ru:{little:"е",big:"Е"},en:{little:"t",big:"T"},size:0,status:2,pointer:null},{key:"KeyY",ru:{little:"н",big:"Н"},en:{little:"y",big:"Y"},size:0,status:2,pointer:null},{key:"KeyU",ru:{little:"г",big:"Г"},en:{little:"u",big:"U"},size:0,status:2,pointer:null},{key:"KeyI",ru:{little:"ш",big:"Ш"},en:{little:"i",big:"I"},size:0,status:2,pointer:null},{key:"KeyO",ru:{little:"щ",big:"Щ"},en:{little:"o",big:"O"},size:0,status:2,pointer:null},{key:"KeyP",ru:{little:"з",big:"З"},en:{little:"p",big:"P"},size:0,status:2,pointer:null},{key:"BracketLeft",ru:{little:"х",big:"Х"},en:{little:"[",big:"{"},size:0,status:2,pointer:null},{key:"BracketRight",ru:{little:"ъ",big:"Ъ"},en:{little:"]",big:"}"},size:0,status:2,pointer:null},{key:"Backslash",ru:{little:"\\",big:"/"},en:{little:"\\",big:"|"},size:0,status:2,pointer:null},{key:"Delete",text:"Del",size:21,status:1,pointer:null},{key:"CapsLock",text:"CapsLock",size:31,status:1,pointer:null},{key:"KeyA",ru:{little:"ф",big:"Ф"},en:{little:"a",big:"A"},size:0,status:2,pointer:null},{key:"KeyS",ru:{little:"ы",big:"Ы"},en:{little:"s",big:"S"},size:0,status:2,pointer:null},{key:"KeyD",ru:{little:"в",big:"В"},en:{little:"d",big:"D"},size:0,status:2,pointer:null},{key:"KeyF",ru:{little:"а",big:"А"},en:{little:"f",big:"F"},size:0,status:2,pointer:null},{key:"KeyG",ru:{little:"п",big:"П"},en:{little:"g",big:"G"},size:0,status:2,pointer:null},{key:"KeyH",ru:{little:"р",big:"Р"},en:{little:"h",big:"H"},size:0,status:2,pointer:null},{key:"KeyJ",ru:{little:"о",big:"О"},en:{little:"j",big:"J"},size:0,status:2,pointer:null},{key:"KeyK",ru:{little:"л",big:"Л"},en:{little:"k",big:"K"},size:0,status:2,pointer:null},{key:"KeyL",ru:{little:"д",big:"Д"},en:{little:"l",big:"L"},size:0,status:2,pointer:null},{key:"Semicolon",ru:{little:"ж",big:"Ж"},en:{little:";",big:":"},size:0,status:2,pointer:null},{key:"Quote",ru:{little:"э",big:"Э"},en:{little:"'",big:'"'},size:0,status:2,pointer:null},{key:"Enter",text:"Enter",size:32,status:1,pointer:null},{key:"ShiftLeft",text:"Shift",size:41,status:1,pointer:null},{key:"KeyZ",ru:{little:"я",big:"Я"},en:{little:"z",big:"Z"},size:0,status:2,pointer:null},{key:"KeyX",ru:{little:"ч",big:"Ч"},en:{little:"x",big:"X"},size:0,status:2,pointer:null},{key:"KeyC",ru:{little:"с",big:"С"},en:{little:"c",big:"C"},size:0,status:2,pointer:null},{key:"KeyV",ru:{little:"м",big:"М"},en:{little:"v",big:"V"},size:0,status:2,pointer:null},{key:"KeyB",ru:{little:"и",big:"И"},en:{little:"b",big:"B"},size:0,status:2,pointer:null},{key:"KeyN",ru:{little:"т",big:"Т"},en:{little:"n",big:"N"},size:0,status:2,pointer:null},{key:"KeyM",ru:{little:"ь",big:"Ь"},en:{little:"m",big:"M"},size:0,status:2,pointer:null},{key:"Comma",ru:{little:"б",big:"Б"},en:{little:",",big:"<"},size:0,status:2,pointer:null},{key:"Period",ru:{little:"ю",big:"Ю"},en:{little:".",big:">"},size:0,status:2,pointer:null},{key:"Slash",ru:{little:".",big:","},en:{little:"/",big:"?"},size:0,status:2,pointer:null},{key:"ArrowUp",text:"▲",content:"▲",size:0,status:2,pointer:null},{key:"ShiftRight",text:"Shift",size:42,status:1,pointer:null},{key:"ControlLeft",text:"Ctrl",size:51,status:1,pointer:null},{key:"MetaLeft",text:"WIN",size:0,status:1,pointer:null},{key:"AltLeft",text:"Alt",size:0,status:1,pointer:null},{key:"Space",ru:{little:" ",big:" "},en:{little:" ",big:" "},size:52,status:1,pointer:null},{key:"AltRight",text:"Alt",size:0,status:1,pointer:null},{key:"ArrowLeft",text:"◄",size:0,status:1,pointer:null},{key:"ArrowDown",text:"▼",content:"▼",size:0,status:1,pointer:null},{key:"ArrowRight",text:"►",size:0,status:1,pointer:null},{key:"ControlRight",text:"Ctrl",size:51,status:1,pointer:null}];const{body:e}=document;(new class{constructor(t,e){this.width=t||75,this.height=e||125,this.lang=null,this.keyLines=[],this.shift=!1,this.shiftLeft=!1,this.altLeft=!1,this.crtl=!1,this.alt=!1,this.CapsLock=!1,this.workSpace=null,this.title=document.createElement("h1"),this.subtitleOs=document.createElement("p"),this.subtitleLayout=document.createElement("p"),this.viewField=this.createViewField(),this.keyBoard=this.createKeyBoard(),this.addListener()}createViewField(){return this.viewField=document.createElement("textarea"),this.viewField.className="textarea",this.viewField.addEventListener("change",(()=>this.viewField.focus())),this.viewField.addEventListener("blur",(()=>this.viewField.focus())),this.viewField}changeKeyBoardLayout(){this.altLeft&&this.shiftLeft&&(this.lang="en"===this.lang?"ru":"en",localStorage.setItem("lang",this.lang),this.setContentOnPage(this.lang),t.filter((t=>!Object.prototype.hasOwnProperty.call(t,"text")&&!Object.prototype.hasOwnProperty.call(t,"base"))).forEach((t=>{t.pointer.children[0].classList.toggle("not-active"),t.pointer.children[1].classList.toggle("not-active")})))}redrawButton(){if(this.changeKeyBoardLayout(),this.alt)return;const e=!this.shift&&this.CapsLock||this.shift&&!this.CapsLock;t.filter((t=>Object.prototype.hasOwnProperty.call(t,"en"))).map((t=>{const i=t;return e?(i.pointer.children[0].textContent=t.en.big,i.pointer.children[1].textContent=t.ru.big):(i.pointer.children[0].textContent=t.en.little,i.pointer.children[1].textContent=t.ru.little),i})),t.filter((t=>Object.prototype.hasOwnProperty.call(t,"base"))).map((t=>{const e=t;return e.pointer.children[0].textContent=t.shift[this.lang],e.pointer.children[0].classList.toggle("not-active",!this.shift),e.pointer.children[1].classList.toggle("not-active",this.shift),e}))}writeSymbolToCursorPosition(t){if(void 0===t)return;const e=this.viewField.value,i=this.viewField.value.length,s=this.viewField.selectionStart;i===s?this.viewField.value+=t:(this.viewField.value=e.slice(0,s)+t+e.slice(s),this.viewField.selectionStart=s+1,this.viewField.selectionEnd=s+1)}writeSymbolToViewField(e){let i;const s=this.viewField.value,l=this.viewField.selectionStart,n=t.filter((t=>t.key===e));0!==n.length&&("ArrowLeft"===n[0].key&&(this.viewField.selectionStart-=1,this.viewField.selectionEnd-=1),"ArrowRight"===n[0].key&&(this.viewField.selectionEnd+=1,this.viewField.selectionStart+=1),"Backspace"===n[0].key&&0!==l&&(this.viewField.value=s.slice(0,l-1)+s.slice(l),this.viewField.selectionStart=l-1,this.viewField.selectionEnd=l-1),"Delete"===n[0].key&&(this.viewField.value=s.slice(0,l)+s.slice(l+1),this.viewField.selectionStart=l,this.viewField.selectionEnd=l),"Enter"===n[0].key&&(this.viewField.value=`${s.slice(0,l)}\n${s.slice(l)}`,this.viewField.selectionStart=l+1,this.viewField.selectionEnd=l+1),"CapsLock"===n[0].key&&(this.CapsLock=!this.CapsLock,t.find((t=>"CapsLock"===t.key)).pointer.classList.toggle("fix-key",this.CapsLock),t.filter((t=>Object.prototype.hasOwnProperty.call(t,"en"))).map((t=>t.pointer.classList.toggle("caps-lock")))),Object.prototype.hasOwnProperty.call(n[0],"content")&&(i=n[0].content,this.viewField.value+=i),i=Object.prototype.hasOwnProperty.call(n[0],"base")&&this.shift?n[0].shift[this.lang]:n[0].base,Object.prototype.hasOwnProperty.call(n[0],"en")&&(i=!this.shift&&this.CapsLock||this.shift&&!this.CapsLock?n[0][this.lang].big:n[0][this.lang].little),this.writeSymbolToCursorPosition(i))}createButton(t){const e=document.createElement("div"),i=document.createElement("span"),s=document.createElement("span");return e.className=`key size-${t.size}`,"en"===this.lang?(i.className="lang-one",s.className="lang-two not-active"):(i.className="lang-one not-active",s.className="lang-two"),Object.prototype.hasOwnProperty.call(t,"text")&&(e.className=`key single size-${t.size}`,e.textContent=t.text),Object.prototype.hasOwnProperty.call(t,"base")&&(i.className="lang-one not-active",s.className="lang-two",i.textContent=t.shift[this.lang],s.textContent=t.base),Object.prototype.hasOwnProperty.call(t,"en")&&(i.textContent=t.en.little,s.textContent=t.ru.little),e.append(i),e.append(s),e.addEventListener("mousedown",(e=>{e.target.closest(".key").classList.toggle("press",!0),"ShiftLeft"!==t.key&&"ShiftRight"!==t.key||(this.shift=!0),this.redrawButton(),this.writeSymbolToViewField(t.key)})),e.addEventListener("mouseup",(e=>{e.target.closest(".key").classList.toggle("press",!1),"ShiftLeft"!==t.key&&"ShiftRight"!==t.key||(this.shift=!1),this.redrawButton()})),e}createKeyLines(t){const e=document.createElement("div");return e.className="key-lines",t.map((t=>{const e=t;return e.pointer=this.createButton(t),e})).map((t=>e.append(t.pointer))),e}createKeyBoard(){return null===localStorage.getItem("lang")?this.lang="en":this.lang=localStorage.getItem("lang"),this.keyBoard=document.createElement("div"),this.keyBoard.className="keyboard",this.keyBoard.append(this.createKeyLines(t)),this.keyBoard}addListener(){document.addEventListener("keydown",(e=>{if(e.preventDefault(),"ShiftLeft"===e.code&&e.repeat)return;const i=t.filter((t=>t.key===e.code.toString()));0!==i.length&&i[0].pointer.classList.toggle("press",!0),this.shift=e.shiftKey,this.alt=e.altKey,this.crtl=e.ctrlKey,"ShiftLeft"===e.code&&(this.shiftLeft=!0),"AltLeft"===e.code&&(this.altLeft=!0),this.redrawButton(),this.writeSymbolToViewField(e.code)})),document.addEventListener("keyup",(e=>{const i=t.filter((t=>t.key===e.code.toString()));0!==i.length&&i[0].pointer.classList.toggle("press",!1),this.shift=e.shiftKey,this.alt=e.altKey,this.crtl=e.ctrlKey,"ShiftLeft"===e.code&&(this.shiftLeft=!1),"AltLeft"!==e.code?this.redrawButton():this.altLeft=!1}))}setContentOnPage(t){"en"===t?(this.title.textContent="Virtual keyboard",this.subtitleOs.textContent="The keyboard was created in OS Windows 10",this.subtitleLayout.textContent="Switch keyboard layout: Left-Alt + Left-Shift"):(this.title.textContent="Виртуальная клавиатура",this.subtitleOs.textContent="Клавиатура создана в ОС Windows 10",this.subtitleLayout.textContent="Переключение раскладки на клавиатуре: Left-Alt + Left-Shift")}"createWorkSpaсe"(){return this.workSpace=document.createElement("div"),this.workSpace.className="work-space",this.workSpace.append(this.viewField),this.workSpace.append(this.keyBoard),this.title.className="title-header",this.subtitleOs.className="subtitle-os",this.subtitleLayout.className="subtitle-layout",this.setContentOnPage(this.lang),e.append(this.title),e.append(this.workSpace),e.append(this.subtitleOs),e.append(this.subtitleLayout),this.viewField.focus(),this.workSpace}}).createWorkSpaсe()}();